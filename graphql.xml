<?xml version="1.0" encoding="UTF-8"?>

<mapper>

	<graphql id="test_api">
		<![CDATA[
			query{
			  repository(owner:"MurphyL", name:"murphyl.com") {
			    id
			  }
			}
		]]>
	</graphql>

	<graphql id="fetch_post_issues">
		<![CDATA[
			query(
				$owner: String!, 
				$repo: String!, 
				$type: [String!], 
				$cursor: String, 
				$size: Int!
			) {
			  repository(owner: $owner, name: $repo) {
			  	id,
			    issues(
				    #FETCH_POSTION#: $size, 
				    labels: $type, 
				    states: CLOSED, 
				    #PAGE_DIRECTION#: $cursor,
				    filterBy: {
				    	assignee: $owner
				    }, orderBy: {
				    	field: CREATED_AT, direction: DESC
				    }
			    ) {
			      nodes {
			        id,
			        number,
			        title,
			        body,
			        closedAt,
			        labels(first: 10) {
			          nodes {
			            name,
			            color,
			            description
			          }
			        },
			        reactionGroups {
			          content,
			          createdAt,
			          users(first: 5) {
			            totalCount
			            nodes {
			              name
			            }
			          }
			        },
			        author {
			          login
			        },
			      	comments(first: 10) {
			      	  nodes {
			      	    author {
			      	      login
			      	    },
			      	    id,
			      	    bodyText,
			      	    publishedAt,
			      	    reactionGroups {
			      	      content,
			      	      createdAt,
			      	      users(first: 5) {
			      	        totalCount,
			      	        nodes {
			      	          name
			      	        }
			      	      }
			      	    }
			      	  }
			      	}
			      },
			      totalCount,
			      pageInfo {
			        hasPreviousPage,
			        hasNextPage,
			        startCursor,
			        endCursor
			      }
			    }
			  }
			}
		]]>
	</graphql>

	<graphql id="get_issue_detail">
		<![CDATA[
			query ($owner: String!, $repo: String!, $number: Int!) {
			  repository(owner: $owner, name: $repo) {
			    issue(number: $number) {
			      id,
			      number,
			      title,
			      body,
			      closedAt,
			      labels(first: 10) {
			        nodes {
			          name,
			          color,
			          description
			        }
			      },
			      reactionGroups {
			        content,
			        createdAt,
			        users(first: 5) {
			          totalCount
			          nodes {
			            name
			          }
			        }
			      },
			      comments(first: 10) {
			        nodes {
			          author {
			            login
			          },
			          id,
			          url,
			          body,
			          publishedAt,
			          reactionGroups {
			            content,
			            createdAt,
			            users(first: 5) {
			              totalCount,
			              nodes {
			                name
			              }
			            }
			          }
			        }
			      }
			    }
			  }
			}
		]]>
	</graphql>

	<graphql id="fetch_code_issues">
		<![CDATA[
			query(
				$owner: String!, 
				$repo: String!, 
				$type: [String!], 
				$size: Int!
			) {
			  repository(owner: $owner, name: $repo) {
			    issues(
				    first: $size, 
				    labels: $type, 
				    states: CLOSED, 
				    filterBy: {
				    	assignee: $owner
				    }, orderBy: {
				    	field: CREATED_AT, direction: DESC
				    }
			    ) {
			      nodes {
			        id,
			        url,
			        number,
			        title,
			        body,
			        closedAt,
			        labels(first: 10) {
			          nodes {
			            name,
			            color,
			            description
			          }
			        },
			      	comments(first: 100) {
			      	  nodes {
			      	    author {
			      	      login
			      	    },
			      	    id,
			      	    body,
			      	    databaseId,
			      	    publishedAt
			      	  }
			      	}
			      },
			      totalCount
			    }
			  }
			}
		]]>
	</graphql>

	<graphql id="get_code_issue_detail">
		<![CDATA[
			query ($id: ID!) {
			  node(id: $id) {
			    ... on IssueComment {
			      id,
			      url,
			      body,
			      createdAt,
			      databaseId,
			      author {
			        login
			      },
			      issue {
			        id,
			        body,
			        number
			      },
			      repository {
			      	id,
			      	name,
			        owner {
			          login
			        }
			      }
			    }
			  }
			}
		]]>
	</graphql>
	
	<graphql id="fetch_issue_commits">
		<![CDATA[
			query($issueId: ID!) {
			  node(id: $issueId) {
			    ... on Issue {
			      id,
			      body,
			      comments(first: 100) {
			        nodes {
			          id
			          url
			          body
			        }
			      }
			    }
			  }
			}
		]]>
	</graphql>
</mapper>