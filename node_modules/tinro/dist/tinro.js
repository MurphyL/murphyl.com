var Q=Object.create,k=Object.defineProperty,U=Object.getPrototypeOf,Z=Object.prototype.hasOwnProperty,B=Object.getOwnPropertyNames,G=Object.getOwnPropertyDescriptor;var H=e=>k(e,"__esModule",{value:!0});var J=(e,r)=>{for(var n in r)k(e,n,{get:r[n],enumerable:!0})},V=(e,r,n)=>{if(r&&typeof r=="object"||typeof r=="function")for(let a of B(r))!Z.call(e,a)&&a!=="default"&&k(e,a,{get:()=>r[a],enumerable:!(n=G(r,a))||n.enumerable});return e},g=e=>V(H(k(e!=null?Q(U(e)):{},"default",e&&e.__esModule&&"default"in e?{get:()=>e.default,enumerable:!0}:{value:e,enumerable:!0})),e);H(exports);J(exports,{Route:()=>N,active:()=>z,meta:()=>O,router:()=>b});var c=g(require("svelte/internal"));var j=g(require("svelte")),A=g(require("svelte/store")),h=g(require("svelte")),C=g(require("svelte/store"));function v(e,r=!1){return e=e.slice(e.startsWith("/#")?2:0,e.endsWith("/*")?-2:void 0),e.startsWith("/")||(e="/"+e),e==="/"&&(e=""),r&&!e.endsWith("/")&&(e+="/"),e}function E(e,r){e=v(e,!0),r=v(r,!0);let n=[],a={},t=!0,i=e.split("/").map(l=>l.startsWith(":")?(n.push(l.slice(1)),"([^\\/]+)"):l).join("\\/"),s=r.match(new RegExp(`^${i}$`));return s||(t=!1,s=r.match(new RegExp(`^${i}`))),s?(n.forEach((l,m)=>a[l]=s[m+1]),{exact:t,params:a,part:s[0].slice(0,-1)}):null}function F(e,r,n){if(n==="")return e;if(n[0]==="/")return n;let a=s=>s.split("/").filter(l=>l!==""),t=a(e),i=r?a(r):[];return"/"+i.map((s,l)=>t[l]).join("/")+"/"+n}function w(e,r,n,a){let t=[r,"data-"+r].reduce((i,s)=>{let l=e.getAttribute(s);return n&&e.removeAttribute(s),l===null?i:l},!1);return!a&&t===""?!0:t||a||!1}function X(e){let r=e.split("&").map(n=>n.split("=")).reduce((n,a)=>{let t=a[0];if(!t)return n;let i=a.length>1?a[a.length-1]:!0;return typeof i=="string"&&i.includes(",")&&(i=i.split(",")),n[t]===void 0?n[t]=[i]:n[t].push(i),n},{});return Object.entries(r).reduce((n,a)=>(n[a[0]]=a[1].length>1?a[1]:a[1][0],n),{})}function $(e){return Object.entries(e).map(([r,n])=>n?n===!0?r:`${r}=${Array.isArray(n)?n.join(","):n}`:null).filter(r=>r).join("&")}function M(e,r){return e?r+e:""}function Y(e){throw new Error("[Tinro] "+e)}var f={HISTORY:1,HASH:2,MEMORY:3,OFF:4,run(e,r,n,a){return e===this.HISTORY?r&&r():e===this.HASH?n&&n():a&&a()},getDefault(){return!window||window.location.pathname==="srcdoc"?this.MEMORY:this.HISTORY}},R,q,W,d=tt();function tt(){let e=f.getDefault(),r,n=s=>window.onhashchange=window.onpopstate=R=null,a=s=>r&&r(x(e)),t=s=>{s&&(e=s),n(),e!==f.OFF&&f.run(e,l=>window.onpopstate=a,l=>window.onhashchange=a)&&a()},i=s=>{let l=Object.assign(x(e),s);return l.path+M($(l.query),"?")+M(l.hash,"#")};return{mode:t,get:s=>x(e),go(s,l){et(e,s,l),a()},start(s){r=s,t()},stop(){r=null,t(f.OFF)},set(s){this.go(i(s),!s.path)},methods(){return at(this)}}}function et(e,r,n){!n&&(q=W);let a=t=>history[`${n?"replace":"push"}State`]({},"",t);f.run(e,t=>a(r),t=>a(`#${r}`),t=>R=r)}function x(e){let r=window.location,n=f.run(e,t=>r.pathname+r.search+r.hash,t=>String(r.hash.slice(1)||"/"),t=>R||"/"),a=n.match(/^([^?#]+)(?:\?([^#]+))?(?:\#(.+))?$/);return W=n,{url:n,from:q,path:a[1]||"",query:X(a[2]||""),hash:a[3]||""}}function at(e){let r=()=>e.get().query,n=s=>e.set({query:s}),a=s=>n(s(r())),t=()=>e.get().hash,i=s=>e.set({hash:s});return{hash:{get:t,set:i,clear:()=>i("")},query:{replace:n,clear:()=>n(""),get(s){return s?r()[s]:r()},set(s,l){a(m=>(m[s]=l,m))},delete(s){a(l=>(l[s]&&delete l[s],l))}}}}var b=rt();function rt(){let{subscribe:e}=(0,A.writable)(d.get(),r=>{d.start(r);let n=nt(d.go);return()=>{d.stop(),n()}});return{subscribe:e,goto:d.go,params:st,meta:O,useHashNavigation:r=>d.mode(r?f.HASH:f.HISTORY),mode:{hash:()=>d.mode(f.HASH),history:()=>d.mode(f.HISTORY),memory:()=>d.mode(f.MEMORY)},location:d.methods()}}function z(e){let r=w(e,"href"),n=w(e,"exact",!0),a=w(e,"active-class",!0,"active");return{destroy:b.subscribe(t=>{let i=E(r,t.path);i&&(i.exact&&n||!n)?e.classList.add(a):e.classList.remove(a)})}}function nt(e){let r=n=>{let a=n.target.closest("a[href]"),t=a&&w(a,"target",!1,"_self"),i=a&&w(a,"tinro-ignore"),s=n.ctrlKey||n.metaKey||n.altKey||n.shiftKey;if(t=="_self"&&!i&&!s&&a){let l=a.getAttribute("href").replace(/^\/#/,"");/^\/\/|^[a-zA-Z]+:/.test(l)||(n.preventDefault(),e(l.startsWith("/")?l:a.href.replace(window.location.origin,"")))}};return addEventListener("click",r),()=>removeEventListener("click",r)}function st(){return(0,j.getContext)("tinro").meta.params}var _="tinro",it=T({pattern:"",matched:!0});function I(e){let r=(0,h.getContext)(_)||it;(r.exact||r.fallback)&&Y(`${e.fallback?"<Route fallback>":`<Route path="${e.path}">`}  can't be inside ${r.fallback?"<Route fallback>":`<Route path="${r.path||"/"}"> with exact path`}`);let n=e.fallback?"fallbacks":"childs",a=(0,C.writable)({}),t=T({fallback:e.fallback,parent:r,update(i){t.exact=!i.path.endsWith("/*"),t.pattern=v(`${t.parent.pattern||""}${i.path}`),t.redirect=i.redirect,t.firstmatch=i.firstmatch,t.breadcrumb=i.breadcrumb,t.match()},register:()=>(t.parent[n].add(t),()=>{t.parent[n].delete(t),t.router.un&&t.router.un()}),show:()=>{e.onShow(),!t.fallback&&t.parent.activeChilds.add(t)},hide:()=>{e.onHide(),!t.fallback&&t.parent.activeChilds.delete(t)},match:async()=>{t.matched=!1;let{path:i,url:s,from:l,query:m}=t.router.location,u=E(t.pattern,i);if(!t.fallback&&u&&t.redirect&&(!t.exact||t.exact&&u.exact)){let p=F(i,t.parent.pattern,t.redirect);return b.goto(p,!0)}t.meta=u&&{from:l,url:s,query:m,match:u.part,pattern:t.pattern,breadcrumbs:t.parent.meta&&t.parent.meta.breadcrumbs.slice()||[],params:u.params,subscribe:a.subscribe},t.breadcrumb&&t.meta&&t.meta.breadcrumbs.push({name:t.breadcrumb,path:u.part}),a.set(t.meta),u&&!t.fallback&&(!t.exact||t.exact&&u.exact)&&(!t.parent.firstmatch||!t.parent.matched)?(e.onMeta(t.meta),t.parent.matched=!0,t.show()):t.hide(),u&&t.showFallbacks()}});return(0,h.setContext)(_,t),(0,h.onMount)(()=>t.register()),t}function O(){return(0,h.hasContext)(_)?(0,h.getContext)(_).meta:Y("meta() function must be run inside any `<Route>` child component only")}function T(e){let r={router:{},exact:!1,pattern:null,meta:null,parent:null,fallback:!1,redirect:!1,firstmatch:!1,breadcrumb:null,matched:!1,childs:new Set,activeChilds:new Set,fallbacks:new Set,async showFallbacks(){if(!this.fallback&&(await(0,h.tick)(),this.childs.size>0&&this.activeChilds.size==0||this.childs.size==0&&this.fallbacks.size>0)){let n=this;for(;n.fallbacks.size==0;)if(n=n.parent,!n)return;n&&n.fallbacks.forEach(a=>{if(a.redirect){let t=F("/",a.parent.pattern,a.redirect);b.goto(t,!0)}else a.show()})}},start(){this.router.un||(this.router.un=b.subscribe(n=>{this.router.location=n,this.pattern!==null&&this.match()}))},match(){this.showFallbacks()}};return Object.assign(r,e),r.start(),r}var lt=e=>({params:e&2,meta:e&4}),K=e=>({params:e[1],meta:e[2]});function L(e){let r,n=e[9].default,a=(0,c.create_slot)(n,e,e[8],K);return{c(){a&&a.c()},m(t,i){a&&a.m(t,i),r=!0},p(t,i){a&&a.p&&(!r||i&262)&&(0,c.update_slot)(a,n,t,t[8],i,lt,K)},i(t){r||((0,c.transition_in)(a,t),r=!0)},o(t){(0,c.transition_out)(a,t),r=!1},d(t){a&&a.d(t)}}}function ct(e){let r,n,a=e[0]&&L(e);return{c(){a&&a.c(),r=(0,c.empty)()},m(t,i){a&&a.m(t,i),(0,c.insert)(t,r,i),n=!0},p(t,[i]){t[0]?a?(a.p(t,i),i&1&&(0,c.transition_in)(a,1)):(a=L(t),a.c(),(0,c.transition_in)(a,1),a.m(r.parentNode,r)):a&&((0,c.group_outros)(),(0,c.transition_out)(a,1,1,()=>{a=null}),(0,c.check_outros)())},i(t){n||((0,c.transition_in)(a),n=!0)},o(t){(0,c.transition_out)(a),n=!1},d(t){a&&a.d(t),t&&(0,c.detach)(r)}}}function ot(e,r,n){let{$$slots:a={},$$scope:t}=r,{path:i="/*"}=r,{fallback:s=!1}=r,{redirect:l=!1}=r,{firstmatch:m=!1}=r,{breadcrumb:u=null}=r,p=!1,S={},y={},P=I({fallback:s,onShow(){n(0,p=!0)},onHide(){n(0,p=!1)},onMeta(o){n(2,y=o),n(1,S=y.params)}});return e.$$set=o=>{"path"in o&&n(3,i=o.path),"fallback"in o&&n(4,s=o.fallback),"redirect"in o&&n(5,l=o.redirect),"firstmatch"in o&&n(6,m=o.firstmatch),"breadcrumb"in o&&n(7,u=o.breadcrumb),"$$scope"in o&&n(8,t=o.$$scope)},e.$$.update=()=>{if(e.$$.dirty&232){t:P.update({path:i,redirect:l,firstmatch:m,breadcrumb:u})}},[p,S,y,i,s,l,m,u,t,a]}var D=class extends c.SvelteComponent{constructor(r){super();(0,c.init)(this,r,ot,ct,c.safe_not_equal,{path:3,fallback:4,redirect:5,firstmatch:6,breadcrumb:7})}},N=D;
